// ===========================================
// Sections
// ===========================================

// Angled divider mixin — top edge only (previous section's color overlaps)
@mixin angled-top($bg-color) {
  &::before {
    content: '';
    position: absolute;
    top: -1px;
    left: 0;
    width: 100%;
    height: 80px;
    background: $bg-color;
    clip-path: polygon(0 0, 100% 0, 100% 0%, 0 100%);
    z-index: 2;
  }
}

.section {
  @include section-padding;
  position: relative;
  overflow: hidden;
  padding-top: 7rem;
}

// ---- Dark section ----
.section--dark {
  background-color: $primary;
  color: $white;
  padding-top: 7rem;
  padding-bottom: 7rem;
  @include angled-top($white);

  &::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 80px;
    background: $white;
    clip-path: polygon(0 100%, 100% 0%, 100% 100%);
    z-index: 2;
  }

  // Last section: no inclines, compact spacing against footer
  &:last-child {
    padding-top: 4rem;
    padding-bottom: 4rem;

    &::before,
    &::after {
      display: none;
    }
  }
}

// ---- Light section ----
.section--light {
  background-color: $light;
  padding-top: 7rem;
  @include angled-top($white);
}

// ---- Default (white bg) section ----
.section:not(.section--dark):not(.section--light) {
  @include angled-top($white);
}

// ---- Context-aware bg color matching ----

// Light -> Dark: top wedge should be light color
.section--light + .section--dark::before {
  background: $light;
}
// Dark -> Light: top wedge should be dark color
.section--dark + .section--light::before {
  background: $primary;
}
// Dark -> White: bottom already white, good
// White -> Dark: top already white, good
// White -> Light: top should be white
.section:not(.section--dark):not(.section--light) + .section--light::before {
  background: $white;
}
// Light -> White: top should be light
.section--light + .section:not(.section--dark):not(.section--light)::before {
  background: $light;
}
// Dark -> White (via after): already white
.section--dark + .section:not(.section--dark):not(.section--light) {
  // top wedge comes from dark's ::after, no extra needed
}

// First section after hero — no top angle needed
.hero + .section::before {
  display: none;
}

.section-header {
  margin-bottom: 3rem;

  &__title {
    font-family: $font-family-heading;
    font-weight: 800;
    margin-bottom: 1rem;
    color: $primary;
  }

  &__subtitle {
    color: $gray-500;
    max-width: 640px;
    line-height: 1.7;
  }

  &--center {
    text-align: center;
    .section-header__subtitle {
      margin-left: auto;
      margin-right: auto;
    }
  }

  .section--dark & {
    &__title {
      color: $white;
    }
    &__subtitle {
      color: rgba($white, 0.65);
    }
  }
}

.section-split {
  &__image {
    border-radius: $border-radius-lg;
    overflow: hidden;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
}

.logo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 1.5rem;
}
